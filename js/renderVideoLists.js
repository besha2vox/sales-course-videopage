const data = [
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №1',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'Закрытие сделок',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 1,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №2',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал? Часть 2 - Методы спасения.',
        category: 'Закрытие сделок',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 2,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №3',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал? Часть 2 - Методы спасения.',
        category: 'Закрытие сделок',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 3,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №4',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'Закрытие сделок',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 4,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №5',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'Закрытие сделок',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 5,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №6',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'Закрытие сделок',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 6,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №7',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'Закрытие сделок',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 7,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №8',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 8,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №9',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 9,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №10',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 10,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №11',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 11,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №12',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 12,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №13',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 13,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №14',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 14,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №15',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 15,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №16',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 16,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №17',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал? Часть 2 - Методы спасения.',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 17,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №18',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал? Часть 4 - Методы спасения.',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 18,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №19',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал? Часть 5 - Методы спасения.',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 19,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №20',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'История продаж',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 20,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №21',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'Как находить клиентов',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 21,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №22',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'Как находить клиентов',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 22,
    },
    {
        url: 'https://player.vimeo.com/video/236203659',
        name: 'Урок №23',
        discription:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.',
        title: 'А что если клиент передумал?',
        category: 'Как находить клиентов',
        duration: '09:30',
        videoPreview:
            'https://sales-course.netlify.app/static/media/video-preview.47cd39bf8499c0804407.jpg',
        id: 23,
    },
];

const courseItemTemplate = ({
    url,
    name,
    title,
    category,
    duration,
    videoPreview,
    id,
}) => {
    return `
    <li class="VideoCursesList_course-item">
    <button id=${id} data-url=${url} data-category=${category} class="VideoCursesItem_button">
        <span class="VideoCursesItem_preview-wrapper">
            <img
                src=${videoPreview}
                alt=${name}
            />
            <p class="VideoCursesItem_duration">${duration}</p>
        </span>
        <div class="VideoCursesItem_info-wrapper">
            <p class="VideoCursesItem_info">
                <span>
                <svg
                        width="16"
                        height="16"
                        viewBox="0 0 16 16"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M8.23654 2.20016C8.07428 2.1541 7.90308 2.15414 7.74074 2.20034C7.39508 2.2987 7.04614 2.3898 6.69601 2.48122C5.13359 2.88916 3.41325 3.33834 1.94162 4.53923L1.24777 5.10543C0.694481 5.55694 0.694768 6.44116 1.24854 6.89218L1.93117 7.44818C2.43548 7.85898 2.96106 8.18025 3.49967 8.44232V11.5282C3.49967 12.2838 3.96316 12.9619 4.66707 13.2364L7.33374 14.2761C7.76201 14.443 8.23734 14.443 8.66561 14.2761L11.3323 13.2364C12.0362 12.9619 12.4997 12.2838 12.4997 11.5282V8.44785C13.0347 8.18718 13.5568 7.86752 14.0577 7.45872L14.1663 7.37012V10.6657C14.1663 10.9418 14.3902 11.1657 14.6663 11.1657C14.9425 11.1657 15.1663 10.9418 15.1663 10.6657V5.99898C15.1662 5.6651 15.0277 5.33128 14.7508 5.10576L14.0682 4.54977C12.5859 3.34242 10.7932 2.87489 9.27914 2.48C8.92981 2.38888 8.58161 2.29807 8.23654 2.20016ZM5.53243 8.54045C5.27921 8.43032 4.98464 8.54632 4.8745 8.79958C4.76437 9.05278 4.88036 9.34738 5.13359 9.45752C5.98549 9.82798 6.86734 10.1312 7.77108 10.3631C7.92854 10.4035 8.09374 10.4035 8.25121 10.3629C9.15248 10.131 10.0317 9.82778 10.8809 9.45725C11.134 9.34678 11.2497 9.05212 11.1392 8.79898C11.0287 8.54592 10.7341 8.43025 10.4809 8.54072C9.68321 8.88885 8.85734 9.17385 8.01081 9.39225C7.16167 9.17378 6.33303 8.88872 5.53243 8.54045Z"
                            fill="url(#paint0_linear_876_760)"
                        ></path>
                        <defs>
                            <linearGradient
                                id="paint0_linear_876_760"
                                x1="7.99967"
                                y1="-11.0986"
                                x2="8.08598"
                                y2="14.401"
                                gradientUnits="userSpaceOnUse"
                            >
                                <stop
                                    stop-color="#111520"
                                ></stop>
                                <stop
                                    offset="1"
                                    stop-color="#DDB06D"
                                ></stop>
                            </linearGradient>
                        </defs></svg
                    >Урок №1</span
                ><span>${category}</span>
            </p>
            <p class="VideoCursesItem_discription">
               ${title}
            </p>
        </div>
    </button>
</li>
    `;
};

const playlistItemTemplate = ({
    url,
    name,
    title,
    duration,
    videoPreview,
    id,
}) => {
    const viewportWidth = window.visualViewport.width;

    return `
    <li class="VideoPlayList_item">
    <button data-url=${url} id=${id}
        class="VideoPlayItem_button"
    >
        <div class="VideoPlayItem_preview-wrapper">
            <div class="VideoPlayItem_icon-wrapper">
                <svg
                    width="18"
                    height="18"
                    viewBox="0 0 12 14"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        id="Polygon 2"
                        d="M12 7L-6.47626e-07 13.9282L-4.64975e-08 0.0717964L12 7Z"
                    ></path>
                </svg>
            </div>
            <img
                width="150"
                src=${videoPreview}
                alt=${name}
            />
        </div>
        <div class="VideoPlayItem_info-wrapper">
            <p class="VideoPlayItem_text-wrapper">
                <span class="VideoPlayItem_lesson"
                    ><svg
                        width="16"
                        height="16"
                        viewBox="0 0 16 16"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M8.23654 2.20016C8.07428 2.1541 7.90308 2.15414 7.74074 2.20034C7.39508 2.2987 7.04614 2.3898 6.69601 2.48122C5.13359 2.88916 3.41325 3.33834 1.94162 4.53923L1.24777 5.10543C0.694481 5.55694 0.694768 6.44116 1.24854 6.89218L1.93117 7.44818C2.43548 7.85898 2.96106 8.18025 3.49967 8.44232V11.5282C3.49967 12.2838 3.96316 12.9619 4.66707 13.2364L7.33374 14.2761C7.76201 14.443 8.23734 14.443 8.66561 14.2761L11.3323 13.2364C12.0362 12.9619 12.4997 12.2838 12.4997 11.5282V8.44785C13.0347 8.18718 13.5568 7.86752 14.0577 7.45872L14.1663 7.37012V10.6657C14.1663 10.9418 14.3902 11.1657 14.6663 11.1657C14.9425 11.1657 15.1663 10.9418 15.1663 10.6657V5.99898C15.1662 5.6651 15.0277 5.33128 14.7508 5.10576L14.0682 4.54977C12.5859 3.34242 10.7932 2.87489 9.27914 2.48C8.92981 2.38888 8.58161 2.29807 8.23654 2.20016ZM5.53243 8.54045C5.27921 8.43032 4.98464 8.54632 4.8745 8.79958C4.76437 9.05278 4.88036 9.34738 5.13359 9.45752C5.98549 9.82798 6.86734 10.1312 7.77108 10.3631C7.92854 10.4035 8.09374 10.4035 8.25121 10.3629C9.15248 10.131 10.0317 9.82778 10.8809 9.45725C11.134 9.34678 11.2497 9.05212 11.1392 8.79898C11.0287 8.54592 10.7341 8.43025 10.4809 8.54072C9.68321 8.88885 8.85734 9.17385 8.01081 9.39225C7.16167 9.17378 6.33303 8.88872 5.53243 8.54045Z"
                            fill="url(#paint${
                                viewportWidth < 1239 ? '0' : '1'
                            }_linear_876_760)"
                        ></path>
                        <defs>
                            <linearGradient
                                id="paint0_linear_876_760"
                                x1="7.99967"
                                y1="-11.0986"
                                x2="8.08598"
                                y2="14.401"
                                gradientUnits="userSpaceOnUse"
                            >
                                <stop
                                    stop-color="#111520"
                                ></stop>
                                <stop
                                    offset="1"
                                    stop-color="#DDB06D"
                                ></stop>
                            </linearGradient>
                        </defs></svg
                    >Урок №1</span
                ><span class="VideoPlayItem_duration"
                    >${duration}</span
                >
            </p>
            <p class="VideoPlayItem_title">
               ${title}
            </p>
        </div>
    </button>
</li>
    `;
};

// #region Render video courses list
const coursesList = document.querySelector('.VideoCursesList_course-list');
const courseButtonList = document.querySelector(
    '.CoursesButtonList_courses-list'
);
const courseButtons = [
    ...document.querySelectorAll('.CourseButton_course-link'),
];

coursesList.innerHTML = data.map(courseItemTemplate).join('');
courseButtonList.addEventListener('click', handleRenderVideoList);

function handleRenderVideoList(e) {
    const button = e.target.closest('.CourseButton_course-link');
    if (!button || button.disabled) return;

    const currentCategory = button.dataset.category;

    if (currentCategory === 'Все видео') {
        coursesList.innerHTML = data.map(courseItemTemplate).join('');
    } else {
        const filteredList = data.filter(
            ({ category }) => category === currentCategory
        );
        coursesList.innerHTML = filteredList.map(courseItemTemplate).join('');
    }
    toggleButtonsClass(currentCategory);
}

function toggleButtonsClass(currentCategory) {
    courseButtons.forEach((btn) => {
        const category = btn.dataset.category;

        if (currentCategory === category && !btn.classList.contains('active')) {
            btn.classList.add('active');
        }

        if (currentCategory !== category && btn.classList.contains('active')) {
            btn.classList.remove('active');
        }
    });
}
// #endregion

// #region Render playlist
const videoPlayLists = [...document.querySelectorAll('.VideoPlayList_list')];

coursesList.addEventListener('click', handleVideoClick);

let currentCategory;
function handleVideoClick(e) {
    const button = e.target.closest('.VideoCursesItem_button');

    if (!button || currentCategory === button.dataset.category) return;

    currentCategory = button.dataset.category;
    videoPlayLists.map((playlist) => {
        const filteredList = data.filter(({ category }) =>
            category.includes(currentCategory)
        );
        console.log(filteredList);
        playlist.innerHTML = filteredList.map(playlistItemTemplate).join('');
    });
}
// #endregion
